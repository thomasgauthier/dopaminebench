The user is asking for the content of section '5.2 EditBuffer and Undo/Redo' from the documentation. Based on the provided context, this section describes the `EditBuffer` component and its undo/redo capabilities within the OpenTUI text buffer system.

The `EditBuffer` is a core component in OpenTUI's text buffer system, responsible for managing text content, cursors, and providing undo/redo functionality . It wraps a `UnifiedTextBuffer` and maintains `undo_stack` and `redo_stack` to track changes .

### Undo/Redo Implementation

The undo/redo system in `EditBuffer` works by saving the state before each edit operation . When an edit occurs, the operation, affected text, and cursor position are saved to the `undo_stack`, and the `redo_stack` is cleared .

*   **`undo()`**: This method reverses the last operation on the `undo_stack` and pushes it to the `redo_stack` . The `editBufferUndo` function in the Zig native library performs the actual undo operation . In TypeScript, the `EditBuffer` class exposes an `undo()` method that calls the native function and decodes the returned metadata .
*   **`redo()`**: This method reapplies an operation from the `redo_stack` and pushes it back to the `undo_stack` . Similarly, `editBufferRedo` in the Zig library handles the native redo logic . The TypeScript `EditBuffer` class provides a `redo()` method for this functionality .
*   **`canUndo()` and `canRedo()`**: These methods check if there are any operations available in the undo or redo stacks, respectively . The TypeScript `EditBuffer` class provides corresponding methods .
*   **`clearHistory()`**: This method clears both the undo and redo stacks .

### Integration with `TextareaRenderable`

The `TextareaRenderable` component utilizes the `EditBuffer`'s undo/redo capabilities. For example, the `undo()` and `redo()` methods in `TextareaRenderable` directly call the corresponding `editBuffer.undo()` and `editBuffer.redo()` methods . These actions are typically triggered by keybindings, such as `super+z` for undo .

### History Management

Certain operations, like `replaceText()`, create an undo point, allowing the change to be undone . Conversely, `setText()` and `setTextOwned()` do not create undo history and clear any existing history . This behavior is demonstrated in the `EditBuffer` tests .

### Event Emission

The `EditBuffer` emits a `"cursor-changed"` event when an undo or redo operation occurs, indicating that the cursor position might have changed as a result of the history manipulation .

## Notes

The provided prompt specifically asked for section '5.2 EditBuffer and Undo/Redo'. The information above is directly extracted and synthesized from the relevant code snippets and the "Text Buffer System" wiki page, which details the `EditBuffer`'s role and its undo/redo mechanism. The "Input Handling" wiki page was not directly relevant to the internal workings of `EditBuffer`'s undo/redo, but rather to how input events are processed and dispatched to components like `TextareaRenderable`.

Wiki pages you might want to explore:
- [Text Buffer System (anomalyco/opentui)](/wiki/anomalyco/opentui#5)
- [Input Handling (anomalyco/opentui)](/wiki/anomalyco/opentui#6)

View this search on DeepWiki: https://deepwiki.com/search/provide-the-full-markdown-cont_ba985eb0-d623-462b-b070-eb54129d3191
